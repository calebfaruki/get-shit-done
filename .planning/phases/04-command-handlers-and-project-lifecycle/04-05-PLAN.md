---
phase: 04-command-handlers-and-project-lifecycle
plan: 05
type: execute
wave: 3
depends_on: [04-02, 04-03, 04-04]
files_modified:
  - commands/execute-phase.md
  - get-shit-done/workflows/execute-phase.md
  - commands/gsd/execute-phase.md
  - commands/gsd/debug.md
  - commands/gsd/health.md
  - commands/gsd/help.md
autonomous: true
requirements: [CMD-06, STATE-03]

must_haves:
  truths:
    - "User can run `/execute-phase N` to execute a phase plan without per-step commits"
    - "Executor reads PHASE-N-PLAN.md from `.planning/project/` and implements all tasks"
    - "Executor appends phase block to PROJECT-SUMMARY.md (overwrites on re-run of same phase)"
    - "No per-step commits, no STATE.md updates, no auto-advance, no continuation agents, no checkpoints"
    - "All changes remain unstaged after execution — verification and staging handled by /verify-phase"
    - "Old `/gsd:execute-phase` command deleted along with remaining gsd:* commands"
  artifacts:
    - path: "commands/execute-phase.md"
      provides: "Bare namespace `/execute-phase` command"
      contains: "name: execute-phase"
    - path: "get-shit-done/workflows/execute-phase.md"
      provides: "Phase execution workflow without git operations or state management"
      contains: "PHASE-.*-PLAN"
  key_links:
    - from: "get-shit-done/workflows/execute-phase.md"
      to: ".planning/project/PHASE-N-PLAN.md"
      via: "reads plan for execution"
      pattern: "PHASE-.*-PLAN"
    - from: "get-shit-done/workflows/execute-phase.md"
      to: ".planning/project/PROJECT-SUMMARY.md"
      via: "appends phase execution block"
      pattern: "PROJECT-SUMMARY"
    - from: "get-shit-done/workflows/execute-phase.md"
      to: "get-shit-done/knowledge/execution-domain.md"
      via: "executor loads deviation rules and TDD flow"
      pattern: "execution-domain"
---

<objective>
Modify the `/execute-phase` command for SPEC compliance and clean up all remaining `gsd:*` commands. This is the final plan and depends on all prior plans being complete.

Purpose: `/execute-phase` is where work gets done. The executor implements the phase plan, tracks what happened, and reports — but never commits, stages, or auto-advances. PROJECT-SUMMARY.md provides execution history for the verifier.
Output: Working `/execute-phase` command, PROJECT-SUMMARY.md tracking, no remaining `gsd:*` commands.
</objective>

<execution_context>
@/Users/calebfaruki/.claude/get-shit-done/workflows/execute-plan.md
@/Users/calebfaruki/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@SPEC.md (section 4 — /execute-phase spec, section 5 — PROJECT-SUMMARY.md format)
@.planning/phases/04-command-handlers-and-project-lifecycle/04-CONTEXT.md
@.planning/phases/04-command-handlers-and-project-lifecycle/04-01-SUMMARY.md
@.planning/phases/04-command-handlers-and-project-lifecycle/04-04-SUMMARY.md
@get-shit-done/workflows/execute-phase.md
@get-shit-done/knowledge/execution-domain.md
@get-shit-done/knowledge/AGENTS.md
@agents/gsd-executor.md
@commands/gsd/execute-phase.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rewrite /execute-phase command and workflow for SPEC compliance</name>
  <files>commands/execute-phase.md, get-shit-done/workflows/execute-phase.md, commands/gsd/execute-phase.md</files>
  <action>
  1. Create `commands/execute-phase.md` (bare namespace):
     - `name: execute-phase`
     - `description: Execute a phase plan. Changes remain unstaged.`
     - `argument-hint: "N (phase number)"`
     - `allowed-tools: [Read, Bash, Write, Edit, Glob, Grep, Task]`
     - Subagent context per SPEC
     - Reference workflow: `<execution_context>@~/.claude/get-shit-done/workflows/execute-phase.md</execution_context>`

  2. Rewrite `get-shit-done/workflows/execute-phase.md` for SPEC compliance:

     **Prerequisite:** `.planning/project/PHASE-{N}-PLAN.md` exists. Soft warning if missing.

     **Flow per SPEC section 4 (`/execute-phase`):**
     a. Bootstrap — read PROJECT.md, PHASE-{N}-PLAN.md, CODEBASE.md, PHASE-{N}-CONTEXT.md if exists
     b. Load phase plan — parse frontmatter, enumerate tasks
     c. Spawn executor subagent with `<files_to_read>`:
        - `.planning/project/PHASE-{N}-PLAN.md`
        - `.planning/project/PROJECT.md`
        - `.planning/CODEBASE.md` (if exists)
        - `.planning/project/PHASE-{N}-CONTEXT.md` (if exists)
        - `get-shit-done/knowledge/execution-domain.md`
        - `./CLAUDE.md` (if exists — project instructions)
     d. Agent executes tasks with deviation rules (transferred from GSD unchanged):
        - Rule 1: Auto-fix bugs encountered during implementation
        - Rule 2: Auto-add missing critical functionality (security, validation)
        - Rule 3: Auto-fix blocking issues
        - Rule 4: Architectural change needed — stop immediately
        - Fix attempt limit: Max 3 attempts per issue, then stop and report
        - Scope boundary: Deviations stay within planned scope
     e. Agent tracks: what was done, deviations, decisions made, files touched
     f. Agent updates `.planning/project/PROJECT-SUMMARY.md` — append phase block (overwrite on re-run of same phase)
     g. Report completion: list files touched. All changes remain unstaged.

     **PROJECT-SUMMARY.md format per SPEC section 5 (plain markdown):**
     ```
     ## Phase N: [Name]
     **Status:** Complete | Failed (step X) | Stopped (Rule 4)
     **Files changed:** [list]
     **Deviations:** [list or "None"]
     **Decisions:** [any runtime decisions made]
     **Notes:** [anything the human should know when reviewing the diff]
     ```

     **Rule 4 termination per SPEC:** Write completed work to PROJECT-SUMMARY.md with status "Stopped (Rule 4)", documenting architectural concern. Return message to human.

     **Re-run on failure per SPEC:** Replays from scratch. Partial unstaged changes are overwritten. Prior phases' staged work is untouched. PROJECT-SUMMARY.md entry overwritten, not duplicated.

     **Remove from GSD version:**
     - Per-step commits (no git commit operations)
     - STATE.md/ROADMAP.md updates
     - Metadata commit
     - Auto-advance to next phase
     - Continuation agents
     - Checkpoints
     - Self-check / self-verification
     - Staging (executor never stages — that's /verify-phase)
     - Wave-based execution (one plan per phase)
     - `execute-plan.md` references (no separate execute-plan workflow)
     - Branching strategy logic

     **Keep from GSD version:**
     - Deviation rules (Rules 1-4, scope boundary, fix attempt limit)
     - TDD flow (RED/GREEN/REFACTOR) when plan type is `tdd`
     - Authentication gates (dynamic, not pre-planned)

     **Handoff:** Suggest `/verify-phase N`. Never auto-advance (SAFE-03).

  3. Delete `commands/gsd/execute-phase.md`.
  </action>
  <verify>
  - `test -f commands/execute-phase.md`
  - `grep 'name: execute-phase' commands/execute-phase.md`
  - `test ! -f commands/gsd/execute-phase.md`
  - `grep '.planning/project/' get-shit-done/workflows/execute-phase.md` confirms correct paths
  - `grep 'PROJECT-SUMMARY' get-shit-done/workflows/execute-phase.md` confirms summary tracking
  - `grep -c 'git commit\|STATE\.md\|ROADMAP\|auto.advance\|continuation\|checkpoint\|wave' get-shit-done/workflows/execute-phase.md` returns 0
  - `grep 'deviation\|Rule 4\|Rule 1' get-shit-done/workflows/execute-phase.md` confirms deviation rules preserved
  </verify>
  <done>`/execute-phase` implements plan without git operations or state management, tracks execution in PROJECT-SUMMARY.md, preserves deviation rules and TDD flow, all changes remain unstaged</done>
</task>

<task type="auto">
  <name>Task 2: Delete remaining gsd:* commands and clean up commands/gsd/ directory</name>
  <files>commands/gsd/debug.md, commands/gsd/health.md, commands/gsd/help.md</files>
  <action>
  After Plans 01-04 delete their respective gsd:* commands, these files should remain in `commands/gsd/`:
  - `debug.md` — keep as `/debug` (orthogonal per SPEC), create bare-namespace command
  - `health.md` — keep as `/health`, create bare-namespace command
  - `help.md` — keep as `/help`, create bare-namespace command

  For each remaining file:
  1. Create corresponding bare-namespace command in `commands/` (e.g., `commands/debug.md`)
     - Update `name:` to drop `gsd:` prefix
     - Keep existing functionality (these are utility commands, not lifecycle commands)
     - Update any references to use new command names (e.g., `/new-project` not `/gsd:new-project`)
  2. Delete the file from `commands/gsd/`
  3. After all files are moved, remove `commands/gsd/` directory if empty

  The `help.md` command should be updated to list the new bare-namespace commands:
  - Project: `/new-project`, `/research-project`, `/discuss-project`, `/plan-project`, `/verify-project`
  - Phase: `/discuss-phase N`, `/research-phase N`, `/plan-phase N`, `/execute-phase N`
  - Utility: `/map`, `/todo`, `/debug`, `/health`, `/help`
  </action>
  <verify>
  - `test -f commands/debug.md && test -f commands/health.md && test -f commands/help.md`
  - `test ! -d commands/gsd` confirms old directory removed (or empty if removal fails)
  - `grep -c 'gsd:' commands/help.md` returns 0 (no old namespace references)
  - All commands in `commands/` use bare namespace in their `name:` field
  </verify>
  <done>All remaining gsd:* commands migrated to bare namespace, `commands/gsd/` directory removed, `/help` updated with complete command list</done>
</task>

</tasks>

<verification>
- [ ] `commands/execute-phase.md` exists with `name: execute-phase`
- [ ] Workflow reads from `.planning/project/PHASE-N-PLAN.md`
- [ ] Workflow writes to `.planning/project/PROJECT-SUMMARY.md`
- [ ] No git commit, STATE.md, ROADMAP.md, auto-advance, continuation, checkpoint in workflow
- [ ] Deviation rules 1-4 preserved in workflow
- [ ] TDD flow preserved for `type: tdd` plans
- [ ] `commands/gsd/` directory no longer exists (or is empty)
- [ ] All commands in `commands/` directory use bare namespace
- [ ] `/help` lists all new commands
</verification>

<success_criteria>
- `/execute-phase N` works without git operations or state management
- PROJECT-SUMMARY.md tracks execution history per SPEC format
- Deviation rules and TDD flow preserved from GSD
- All changes remain unstaged after execution
- No `gsd:*` commands remain anywhere in the codebase
- Complete bare-namespace command surface operational
</success_criteria>

<output>
After completion, create `.planning/phases/04-command-handlers-and-project-lifecycle/04-05-SUMMARY.md`
</output>
