---
phase: 01-characterization-tests-and-safe-deletion
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - tests/deletion-safety.test.cjs
  - commands/gsd/audit-milestone.md
  - commands/gsd/complete-milestone.md
  - commands/gsd/new-milestone.md
  - commands/gsd/plan-milestone-gaps.md
  - commands/gsd/add-phase.md
  - commands/gsd/insert-phase.md
  - commands/gsd/remove-phase.md
  - commands/gsd/pause-work.md
  - commands/gsd/resume-work.md
  - commands/gsd/progress.md
  - commands/gsd/quick.md
  - commands/gsd/add-todo.md
  - commands/gsd/cleanup.md
  - commands/gsd/join-discord.md
  - commands/gsd/list-phase-assumptions.md
  - commands/gsd/reapply-patches.md
  - commands/gsd/update.md
  - commands/gsd/verify-work.md
  - commands/gsd/new-project.md.bak
  - get-shit-done/workflows/audit-milestone.md
  - get-shit-done/workflows/complete-milestone.md
  - get-shit-done/workflows/new-milestone.md
  - get-shit-done/workflows/plan-milestone-gaps.md
  - get-shit-done/workflows/add-phase.md
  - get-shit-done/workflows/insert-phase.md
  - get-shit-done/workflows/remove-phase.md
  - get-shit-done/workflows/pause-work.md
  - get-shit-done/workflows/resume-project.md
  - get-shit-done/workflows/progress.md
  - get-shit-done/workflows/quick.md
  - get-shit-done/workflows/add-todo.md
  - get-shit-done/workflows/cleanup.md
  - get-shit-done/workflows/list-phase-assumptions.md
  - get-shit-done/workflows/update.md
  - get-shit-done/workflows/verify-work.md
  - get-shit-done/workflows/execute-plan.md
  - get-shit-done/workflows/transition.md
  - agents/gsd-research-synthesizer.md
  - agents/gsd-roadmapper.md
  - agents/gsd-integration-checker.md
autonomous: true
requirements:
  - CLN-01
  - CLN-02
  - CLN-03

must_haves:
  truths:
    - "All 81 existing tests still pass after every deletion wave"
    - "Characterization tests validate core workflows survive deletions"
    - "~38 low-risk dead files (commands, workflows, agents) are deleted"
  artifacts:
    - path: "tests/deletion-safety.test.cjs"
      provides: "Characterization tests for deletion validation"
      min_lines: 30
  key_links:
    - from: "tests/deletion-safety.test.cjs"
      to: "get-shit-done/bin/gsd-tools.cjs"
      via: "runGsdTools helper invocation"
      pattern: "runGsdTools"
---

<objective>
Write characterization tests that validate core GSD workflows (phase listing, state retrieval, frontmatter operations), then delete ~38 low-risk dead files in 3 waves: (1) milestone commands + workflows, (2) phase management + pause/resume commands + workflows, (3) standalone dead commands + workflows + dead agents. Run full test suite after each wave to confirm no regressions.

Purpose: Establish a test safety net then safely remove the largest batch of dead files with minimal risk.
Output: Characterization test file + working tree with ~38 files deleted.
</objective>

<execution_context>
@/Users/calebfaruki/.claude/get-shit-done/workflows/execute-plan.md
@/Users/calebfaruki/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-characterization-tests-and-safe-deletion/01-CONTEXT.md
@.planning/phases/01-characterization-tests-and-safe-deletion/01-RESEARCH.md
@tests/helpers.cjs
@tests/phase.test.cjs
@tests/state.test.cjs
@tests/commands.test.cjs
</context>

<tasks>

<task type="auto">
  <name>Task 1: Write characterization tests for core workflow survival</name>
  <files>tests/deletion-safety.test.cjs</files>
  <action>
Create `tests/deletion-safety.test.cjs` using the existing test patterns from `tests/helpers.cjs` (runGsdTools, createTempProject, cleanup).

Write characterization tests that capture current behavior of workflows that must survive all deletions:

1. **Phase operations** — `runGsdTools('phases list', tmpDir)` returns phases from a ROADMAP.md. This proves phase.cjs works without milestone dependencies.

2. **State retrieval** — `runGsdTools('state get', tmpDir)` returns current state from STATE.md. This proves state.cjs works without config.json.

3. **Frontmatter validation** — `runGsdTools('frontmatter validate <path> --schema plan', tmpDir)` validates a minimal PLAN.md. This proves frontmatter.cjs works independently.

4. **Init commands** — `runGsdTools('init plan-phase "01-test"', tmpDir)` returns JSON with phase context. This proves init.cjs works without milestone/config dependencies.

5. **Progress command** — `runGsdTools('progress', tmpDir)` returns project progress. This captures the current behavior before any files are deleted.

Each test should set up minimal `.planning/` structure via `createTempProject()` + file writes, invoke the command, and assert on success + output structure. Use `node:test` describe/test/beforeEach/afterEach pattern matching existing test files.

Run with `node --test tests/deletion-safety.test.cjs` to verify all tests pass BEFORE any deletions.
  </action>
  <verify>Run `node --test tests/deletion-safety.test.cjs` — all tests pass (0 failures)</verify>
  <done>Characterization test file exists with 5+ tests covering phase, state, frontmatter, init, and progress operations. All pass.</done>
</task>

<task type="auto">
  <name>Task 2: Delete ~38 dead files in 3 waves with test validation</name>
  <files>
commands/gsd/audit-milestone.md
commands/gsd/complete-milestone.md
commands/gsd/new-milestone.md
commands/gsd/plan-milestone-gaps.md
commands/gsd/add-phase.md
commands/gsd/insert-phase.md
commands/gsd/remove-phase.md
commands/gsd/pause-work.md
commands/gsd/resume-work.md
commands/gsd/progress.md
commands/gsd/quick.md
commands/gsd/add-todo.md
commands/gsd/cleanup.md
commands/gsd/join-discord.md
commands/gsd/list-phase-assumptions.md
commands/gsd/reapply-patches.md
commands/gsd/update.md
commands/gsd/verify-work.md
commands/gsd/new-project.md.bak
get-shit-done/workflows/audit-milestone.md
get-shit-done/workflows/complete-milestone.md
get-shit-done/workflows/new-milestone.md
get-shit-done/workflows/plan-milestone-gaps.md
get-shit-done/workflows/add-phase.md
get-shit-done/workflows/insert-phase.md
get-shit-done/workflows/remove-phase.md
get-shit-done/workflows/pause-work.md
get-shit-done/workflows/resume-project.md
get-shit-done/workflows/progress.md
get-shit-done/workflows/quick.md
get-shit-done/workflows/add-todo.md
get-shit-done/workflows/cleanup.md
get-shit-done/workflows/list-phase-assumptions.md
get-shit-done/workflows/update.md
get-shit-done/workflows/verify-work.md
get-shit-done/workflows/execute-plan.md
get-shit-done/workflows/transition.md
agents/gsd-research-synthesizer.md
agents/gsd-roadmapper.md
agents/gsd-integration-checker.md
  </files>
  <action>
Delete files in 3 waves. After EACH wave, run `npm test` (full suite) AND `node --test tests/deletion-safety.test.cjs` (characterization tests). If any test fails, investigate: if test validates removed behavior that's intentionally gone, update the test; if deletion broke needed functionality, restore the file and note it for investigation.

**Wave 1: Milestone system (8 files)**
Delete these commands + workflows together (functional unit):
- `commands/gsd/audit-milestone.md`
- `commands/gsd/complete-milestone.md`
- `commands/gsd/new-milestone.md`
- `commands/gsd/plan-milestone-gaps.md`
- `get-shit-done/workflows/audit-milestone.md`
- `get-shit-done/workflows/complete-milestone.md`
- `get-shit-done/workflows/new-milestone.md`
- `get-shit-done/workflows/plan-milestone-gaps.md`

Run: `npm test` — expect 81 tests pass. Run: `node --test tests/deletion-safety.test.cjs` — expect all pass. If `milestone.test.cjs` tests fail because they reference milestone commands, note but continue (the milestone.cjs library file is not deleted in this plan).

**Wave 2: Phase management + pause/resume (10 files)**
Delete these commands + workflows together:
- `commands/gsd/add-phase.md`, `get-shit-done/workflows/add-phase.md`
- `commands/gsd/insert-phase.md`, `get-shit-done/workflows/insert-phase.md`
- `commands/gsd/remove-phase.md`, `get-shit-done/workflows/remove-phase.md`
- `commands/gsd/pause-work.md`, `get-shit-done/workflows/pause-work.md`
- `commands/gsd/resume-work.md`, `get-shit-done/workflows/resume-project.md`

Run: `npm test` + `node --test tests/deletion-safety.test.cjs` — all pass.

**Wave 3: Standalone dead files (20 files)**
Delete remaining dead commands, workflows, agents, and backup files:
- Commands: `progress.md`, `quick.md`, `add-todo.md`, `cleanup.md`, `join-discord.md`, `list-phase-assumptions.md`, `reapply-patches.md`, `update.md`, `verify-work.md`, `new-project.md.bak`
- Workflows: `progress.md`, `quick.md`, `add-todo.md`, `cleanup.md`, `list-phase-assumptions.md`, `update.md`, `verify-work.md`, `execute-plan.md`, `transition.md`
- Agents: `gsd-research-synthesizer.md`, `gsd-roadmapper.md`, `gsd-integration-checker.md`

Note: Do NOT delete `commands/gsd/new-project.md` (the actual command, not the .bak). It's marked for modification in later phases.

Run: `npm test` + `node --test tests/deletion-safety.test.cjs` — all pass.

No git commits — all changes are working tree only per user decision.
  </action>
  <verify>Run `npm test` — 81+ tests pass (0 failures). Run `node --test tests/deletion-safety.test.cjs` — all characterization tests pass. Verify deleted files don't exist: `ls commands/gsd/audit-milestone.md 2>&1` returns "No such file". Verify installation not broken: `node get-shit-done/bin/gsd-tools.cjs phases list` still works in a temp project (CLN-03 partial: Claude Code only, full cross-platform deferred to Phase 7).</verify>
  <done>~38 dead files deleted across 3 waves. Full test suite passes after each wave. No regressions. Installation still functional for Claude Code.</done>
</task>

</tasks>

<verification>
- `npm test` passes with 0 failures (81+ tests)
- `node --test tests/deletion-safety.test.cjs` passes with 0 failures
- Milestone command files no longer exist in `commands/gsd/`
- Phase management command files no longer exist in `commands/gsd/`
- Dead workflow files no longer exist in `get-shit-done/workflows/`
- Dead agent files no longer exist in `agents/`
- Remaining commands still work: `execute-phase`, `plan-phase`, `discuss-phase`, `research-phase`, `map-codebase`, `check-todos`, `debug`, `health`, `help`, `settings`, `set-profile`, `new-project`
</verification>

<success_criteria>
Characterization tests written and passing. ~38 dead files deleted in 3 validated waves. Full test suite passes. No regressions.
</success_criteria>

<output>
After completion, create `.planning/phases/01-characterization-tests-and-safe-deletion/01-01-SUMMARY.md`
</output>
